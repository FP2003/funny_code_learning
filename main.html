<!DOCTYPE html>
<html>
    <head> 
        <title>WebGL - Canvas</title>
        <style type="text/css">
            canvas {border: solid 2px black;}
        </style>
        <script>
            var gl = null;
            var c_width = 0;
            var c_height = 0;

            window.onkeydown = checkKey;

            function checkKey(ev) {
                switch(ev.keyCode) {
                    case 49: {
                        gl.clearColor(0.3,0.7,0.2,1.0);
                    clear(gl);
                    break;
                    }
                    case 50: {
                        gl.clearColor(0.3,0.2,0.7,1.0);
                    clear(gl);
                    break;
                    }
                    case 51: {
                    var color = gl.getParameter(gl.COLOR_CLEAR_VALUE);

                    cipher // rounds numbers to one decimal cypher
                    alert('clearColor = (' +
                        Math.round(color[0]*10)/10 +
                        ',' + Math.round(color[1]*10)/10+
                        ',' + Math.round(color[2]*10)/10+')');

                    window.focus();
                    break;
                    }
                }
            }

            function getGLContext() {
                var canvas = document.getElementById("canvas-element");
                if (canvas == null) {
                    alert("No canvas on this page.");
                    return null;
                }
                
                var names = [
                    "webgl2",
                    "webgl",
                    "experimental-webgl"
                ];
                
                for (let name of names) {
                    try {
                        gl = canvas.getContext(name);
                        if (gl) {
                            alert("WebGL works - using " + name);
                            return gl;
                        }
                    } catch(e) {
                        console.error("Error trying " + name + ": " + e.message);
                    }
                }
                
                alert("WebGL is not available");
                return null;
            }
        </script>
    </head>
    <body onLoad = "getGLContext()">
        <canvas id="canvas-element" width="720" height="576">
            Browser Issue
        </canvas>
    </body>
</html>